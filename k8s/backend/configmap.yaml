# # Kubernetes ConfigMap for Backend Service
# # Contains NON-SENSITIVE configuration data
# #
# # What is this service?
# # - Main API backend for the weather-agent application
# # - Handles authentication (BetterAuth)
# # - Manages weather schedule routes
# # - Exposes health and metrics endpoints
# #
# # ConfigMaps store configuration in PLAIN TEXT - visible to anyone with cluster access
# # DO NOT put passwords, API keys, or secrets here!

# apiVersion: v1
# kind: ConfigMap
# metadata:
#   name: backend-config
#   namespace: default
# data:
#   # ========================================
#   # APPLICATION SETTINGS
#   # ========================================
#   # Node environment (development, production, staging)
#   # Used by: apps/backend/src/index.ts and auth.config.ts
#   # Affects: cookie security, CORS, logging behavior
#   NODE_ENV: "production"

#   # Port the backend service listens on
#   # Used by: apps/backend/src/index.ts (BACKEND_PORT variable)
#   # Must match the containerPort in deployment.yaml (line 20)
#   # Must match the targetPort in service.yaml (line 11)
#   PORT: "5001"

#   # ========================================
#   # DATABASE CONNECTION
#   # ========================================
#   # MongoDB connection string (without credentials)
#   # Used by: packages/shared/src/common/db.config.ts
#   # Format: mongodb://<service-name>:<port>/<database-name>
#   # 'mongodb' is the Kubernetes service name (see k8s/mongodb/service.yaml)
#   # Note: If using auth, credentials should be in Secret and referenced in URI
#   MONGODB_URI: "mongodb://mongodb:27017/weather-agent"

#   # ========================================
#   # REDIS CONNECTION (Caching/Sessions)
#   # ========================================
#   # Redis host - using Kubernetes service name for DNS resolution
#   # Used by: packages/shared/src/common/redis.config.ts
#   # 'redis' resolves to the redis Service within the cluster
#   REDIS_HOST: "redis"

#   # Redis port - standard Redis port
#   # Used by: packages/shared/src/common/redis.config.ts
#   REDIS_PORT: "6379"

apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
data:
  NODE_ENV: "development" # currently set as developement to disable secure cookies, set to production when we deploy to cloud
  PORT: "5001"
  MONGODB_URI: "mongodb://mongodb:27017/weather-agent"
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"
  BETTER_AUTH_URL: "http://weather-agent.com:8080/api/auth"
  FRONTEND_URL: "http://weather-agent.com:8080"
